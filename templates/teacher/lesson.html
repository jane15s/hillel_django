<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson {{ lesson.name }}</title>
</head>
<body>

<h2>Lesson "{{ lesson.name }}" details:</h2>

<div style="border: 1px solid #ccc; border-radius: 8px; padding: 10px; margin-bottom: 20px; background-color: #f9f9f9;">
    <p><strong>Description:</strong> {{ lesson.description }}</p>
    <p><strong>Date:</strong> {{ lesson.date }}</p>
    <p><strong>Room:</strong> {{ lesson.room }}</p>
    <p><strong>Homework:</strong> {{ lesson.homework }}</p>
</div>

<h3>Set grade:</h3>

<form action="/teacher/{{ lesson.teacher.id }}/lessons/{{ lesson.id }}/set_grade/" method="post" style="margin-bottom: 30px;">
    {% csrf_token %}

    <label><strong>Student:</strong></label><br>
    <select name="student_id" required style="margin-bottom: 10px;">
        <option value="">Select student</option>
        {% for student in students %}
            <option value="{{ student.student.id }}">
                {{ student.student.first_name }} {{ student.student.last_name }}
            </option>
        {% endfor %}
    </select>

    <br><br>

    <label><strong>Grade:</strong></label><br>
    <select name="grade" style="margin-bottom: 10px;">
        <option value="">-</option>
        {% for n in grade_choices %}
            <option value="{{ n }}">{{ n }}</option>
        {% endfor %}
    </select>

    <br><br>

    <label><strong>Homework Grade:</strong></label><br>
    <select name="homework_grade" style="margin-bottom: 15px;">
        <option value="">-</option>
        {% for n in grade_choices %}
            <option value="{{ n }}">{{ n }}</option>
        {% endfor %}
    </select>

    <br><br>

    <button type="submit">Set grade</button>
</form>

<h3>Existing grades:</h3>

<table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 80%;">
    <thead style="background-color: #f2f2f2;">
        <tr>
            <th>Student</th>
            <th>Grade</th>
            <th>Homework Grade</th>
        </tr>
    </thead>

    <tbody>
    {% for g in grades %}
        <tr>
            <td>{{ g.student.first_name }} {{ g.student.last_name }}</td>
            <td>{{ g.grade|default:"-" }}</td>
            <td>{{ g.homework_grade|default:"-" }}</td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="3" style="text-align: center;">No grades yet</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

</body>
</html>
